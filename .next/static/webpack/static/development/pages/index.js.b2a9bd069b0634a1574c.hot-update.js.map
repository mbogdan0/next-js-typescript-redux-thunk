{"version":3,"file":"static/webpack/static/development/pages/index.js.b2a9bd069b0634a1574c.hot-update.js","sources":["webpack:///./src/pages/index.tsx","webpack:///./src/redux/store.ts","webpack:///./src/redux/with-redux.tsx"],"sourcesContent":["import React from 'react';\nimport { NextPage } from 'next';\nimport { Invite } from '../containers/invite';\nimport { withRedux } from '../redux/with-redux';\nimport { inviteFetchAsync } from '../containers/invite/redux/actions';\n\nconst IndexPage: NextPage = () => {\n  return (\n    <div>\n      <h1>OK</h1>\n      <Invite />\n    </div>\n  );\n};\n\nIndexPage.getInitialProps = async ({ reduxStore, runSaga }: any) => {\n  const { dispatch } = reduxStore;\n\n  console.log(runSaga);\n\n  dispatch(inviteFetchAsync());\n  return {};\n};\n\n\nexport default withRedux(IndexPage);\n","import { createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly';\n\nimport { rootReducer } from './root-reducer';\nimport { middleware, sagaMiddleware } from './middleware';\nimport { rootSaga } from './root-saga';\n\nexport const initializeStore = (preloadedState) => {\n  const store = createStore(\n    rootReducer,\n    preloadedState,\n    composeWithDevTools(applyMiddleware(...middleware)),\n  );\n  const rootSagas = sagaMiddleware.run(rootSaga);\n  return {\n    store,\n    rootSagas,\n  };\n};\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport App from 'next/app';\nimport { initializeStore } from './store';\n\nlet reduxStore;\nfunction getOrInitializeStore(initialState?) {\n  if (typeof window === 'undefined') {\n    return initializeStore(initialState);\n  }\n  if (!reduxStore) {\n    reduxStore = initializeStore(initialState);\n  }\n  return reduxStore;\n}\n\nexport const withRedux = (PageComponent, { ssr = true } = {}) => {\n  const WithRedux = ({ initialReduxState, ...props }: any) => {\n    const store = getOrInitializeStore(initialReduxState);\n    return (\n      <Provider store={store.store}>\n        <PageComponent {...props} />\n      </Provider>\n    );\n  };\n\n  // Make sure people don't use this HOC on _app.js level\n  if (process.env.NODE_ENV !== 'production') {\n    const isAppHoc = PageComponent === App || PageComponent.prototype instanceof App;\n    if (isAppHoc) {\n      throw new Error('The withRedux HOC only works with PageComponents');\n    }\n  }\n\n  // Set the correct displayName in development\n  if (process.env.NODE_ENV !== 'production') {\n    const displayName = PageComponent.displayName || PageComponent.name || 'Component';\n    WithRedux.displayName = `withRedux(${displayName})`;\n  }\n\n  if (ssr || PageComponent.getInitialProps) {\n    WithRedux.getInitialProps = async (context: any) => {\n      const reduxStore = getOrInitializeStore();\n\n      // Provide the store to getInitialProps of pages\n      context.reduxStore = reduxStore.store;\n      context.runSaga = reduxStore.rootSagas;\n      const pageProps = typeof PageComponent.getInitialProps === 'function'\n        ? await PageComponent.getInitialProps(context)\n        : {};\n      return {\n        ...pageProps,\n        initialReduxState: reduxStore.getState(),\n      };\n    };\n  }\n  return WithRedux;\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AALA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AASA;;;;;;;;;;;;;;;;;;;;;;ACzBA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAKA;AACA;AACA;AACA;AAFA;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA,eAEA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAMA;AANA;AAWA;AAXA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AACA;AAAA;AACA;;;;A","sourceRoot":""}